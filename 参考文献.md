# 参考文献与相关工作

本文档整理了"叙事导航者"项目参考的核心研究工作，包括 GuideLLM、StorySage 等相关系统的技术方案。

---

## 1. 核心大纲升级：从"通用"到"垂直访谈规程"

### 1.1 VIP (Life Story Interview) 规程

GuideLLM 引入的 VIP 规程是 Planner 预设大纲的灵魂。大纲不应只是时间轴，而应是一个**"领域-主题-种子问题"**的三维矩阵。

### 1.2 核心大纲 (Master Schema) 扩展

我们将 McAdams 的规程适配到系统，作为 Planner 的初始化骨架：

| 领域 (Domain) | 主题 (Theme) | Planner 的触发逻辑 |
|:---|:---|:---|
| **人生篇章** | 目录、过渡点 | 访谈起始：构建整体索引图谱 |
| **关键场景** | 高潮、低谷、转折点 | 探测到强烈情绪或重大变动时切换 |
| **生活挑战** | 健康危机、失落、遗憾 | 深入挖掘"生命意义"和"价值观" |
| **个人意识形态** | 信仰演变、核心价值观 | 访谈中后期：进行叙事升华 |

---

## 2. 算法模块细节：MGE (记忆图驱动外推)

### 2.1 MGE 循环流程

参考 GuideLLM 的 MGE 流程，Planner 决策大脑细化为 **"提取-合并-外推"** 循环：

```
┌─────────────────────────────────────────────────────────────┐
│                    MGE 循环流程                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌──────────┐    ┌──────────┐    ┌──────────┐            │
│   │  提取    │───▶│  合并    │───▶│  外推    │            │
│   │Extraction│    │  Merging │    │Extrapolate│            │
│   └──────────┘    └──────────┘    └──────────┘            │
│        │               │               │                   │
│        ▼               ▼               ▼                   │
│  从对话中识别     将新事件与      基于图谱状态             │
│  事件节点        现有事件合并    生成个性化问题            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 提取 (Extraction) - 格式化协议

Planner 调用 IE 模块，强制输出以下格式：

```
<日期>#<主题>#<涉及人员>#<详细描述>
```

**示例**：
```
1980年初#生日聚会#Michelle, Adolf, 邻居#<这次聚会的详细描述>
```

> 注：建议使用正则表达式或 Pydantic 进行校验。

### 2.3 外推 (Extrapolation) - 导航算法

GuideLLM 提供的三种外推模式：

| 模式 | 触发条件 | 动作 |
|:---|:---|:---|
| **空白填充** (Gap Filling) | 某时期节点密度低于阈值 | 强制触发 Breadth_Switch 到该时期 |
| **人物聚类** (Hub Person) | 某人连接多个事件 | 生成针对该人的专项问题 |
| **冲突激发** (Conflict Triggering) | 新旧事件不一致 | 触发 Clarification 动作 |

---

## 3. 评估环境：构建"数字孪生受访者"

### 3.1 User Simulator 设计

参考论文中的 User Simulator，仿真评估环境可以这样搭建：

#### 数据源

- 选取经典的中国老人回忆录（或项目方提供的真实样本）
- 构建 RAG 向量库

#### 模拟器逻辑

| 组件 | 说明 |
|:---|:---|
| **角色扮演** | LLM 扮演特定背景的老人（如：知青、老工人） |
| **记忆检索** | 使用 `<RETRIEVE>` 命令模拟真实的人类回忆过程 |

#### 评估指标 (Metrics)

| 指标 | 说明 |
|:---|:---|
| **#Total Rounds vs. #Invalid Rounds** | 统计重复提问或无意义跳转的比例 |
| **语义等价性评测** | 用 GPT-4 判断 Planner 提取的事件与 Simulator 回答的原意是否一致（相关性评分 0/1） |

---

## 4. 交互体验优化：共情参与模块 (Empathy Engagement)

### 4.1 模块设计

GuideLLM 提到的共情参与模块可作为交互模块（Executor）的增强插件。

### 4.2 工作机制

| 逻辑 | 动作 |
|:---|:---|
| Planner 输出指令时，不仅给动作，还给情感底色 (Emotional_Tone) | 若当前节点是"低谷"，附加 `Tone: Comforting` |
| | 若当前节点是"高潮"，附加 `Tone: Admiring` |

### 4.3 效果

避免传统 AI 访谈像"查户口"的问题，提升老人的表达欲。

---

## 5. GuideLLM：VIP+MGE+评估环境

### 5.1 系统架构

GUIDELLM 将 LLM 引导的对话分解为三个基本组成部分：

```
┌─────────────────────────────────────────────────────────────┐
│                      GUIDELLM 架构                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────────┐  ┌──────────────────┐  ┌────────────┐ │
│  │  目标导航模块     │  │  上下文管理模块   │  │  共情参与   │ │
│  │  (Goal Nav)      │  │  (Context Mgmt)  │  │  模块      │ │
│  │                  │  │                  │  │            │ │
│  │  • VIP 规程      │  │  • 会话摘要      │  │  • 情感监控 │ │
│  │  • MGE 流程      │  │  • 信息整合      │  │  • 表达策略 │ │
│  └──────────────────┘  └──────────────────┘  └────────────┘ │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 目标导航

混合方法，结合了：
- **口述访谈协议 (VIP)**：Maunsell, 2016; Castillo-Montoya, 2016; Lamb et al., 2007
- **记忆图驱动的外推 (MGE)**

借鉴了流行的访谈协议**"人生故事访谈"（McAdams, 2008）**作为通用指导。

### 5.3 评估维度

| 维度 | 评估内容 |
|:---|:---|
| **访谈质量** | 事件覆盖度和正确性 |
| **对话质量** | 沟通流畅度、认同感和安慰感 |
| **生成质量** | 生成传记的洞察力、叙事性和情感影响力 |

---

## 6. 人生故事访谈规程 (Life Story Interview)

人生故事访谈（McAdams, 2008）是一个访谈个人人生故事的规程。访谈包含几个领域，每个领域包含几个主题。

### 6.1 领域与主题结构

| 领域 | 主题数量 | 核心目标 |
|:---|:---:|:---|
| **人生篇章** | 1 | 构建时间轴骨架，划分人生阶段 |
| **关键场景** | 8 | 挖掘高光、低谷、转折点等标志性事件 |
| **未来剧本** | 3 | 探索期望、梦想与人生计划 |
| **挑战** | 4 | 直面困难、健康、失落与遗憾 |
| **个人意识形态** | 4 | 提炼价值观与信仰体系 |

### 6.2 二十三主题详解

#### 主题 1：人生篇章概览

> 请参与者将自己的人生想象成一本书，思考其人生故事的主要篇章，为每个篇章提供标题和简短的描述。

**种子问题**：
1. 如果将自己的人生想象成一本书，目录会是什么样的？你能为你人生的每个篇章起一个标题吗？
2. 让我们从你提到的第一个篇章开始。你能简要描述一下你人生的这个部分是关于什么的吗？
3. 这个篇章的主要事件或主题是什么？
4. 这个篇章是如何过渡到下一个篇章的？哪些变化或事件标志着下一个篇章的开始？
5. 当我们从一个篇章过渡到下一个篇章时，你能找出任何转折点或重要的事件，它们开启了你人生的新阶段吗？

#### 主题 2-9：关键场景

| 主题 | 说明 |
|:---|:---|
| **主题 2：高潮** (Peak Experience) | 巅峰时刻 |
| **主题 3：低谷** (Low Point) | 充满挑战或困难的时刻 |
| **主题 4：转折点** (Turning Point) | 重大改变的时刻 |
| **主题 5：童年积极回忆** | 特别快乐的回忆 |
| **主题 6：童年消极回忆** | 困难或不快乐的回忆 |
| **主题 7：生动的成人记忆** | 特别生动或有意义的场景 |
| **主题 8：宗教、精神或神秘体验** | 与超越自身事物的深刻联系 |
| **主题 9：智慧事件** | 展现或遇到智慧的时刻 |

#### 主题 10-12：未来剧本

| 主题 | 说明 |
|:---|:---|
| **主题 10：下一章** | 推测近期未来 |
| **主题 11：梦想、希望和未来计划** | 讨论希望、梦想和计划 |
| **主题 12：人生项目** | 意义重大的正在进行或计划中的项目 |

#### 主题 13-16：挑战

| 主题 | 说明 |
|:---|:---|
| **主题 13：人生挑战** | 一生中面临的最大挑战 |
| **主题 14：健康** | 重大健康问题、挑战或危机 |
| **主题 15：失落** | 最重大的 interpersonal 失落 |
| **主题 16：失败的遗憾** | 最重大的单次失败或遗憾 |

#### 主题 17-20：个人意识形态

| 主题 | 说明 |
|:---|:---|
| **主题 17：宗教/伦理价值观** | 宗教和伦理价值观 |
| **主题 18：政治/社会价值观** | 政治和社会价值观 |
| **主题 19：宗教和政治观点转变和发展** | 信仰和价值观如何随时间变化 |
| **主题 20：单一价值观** | 最重要的价值观 |

---

## 7. 记忆图驱动外推 (MGE) 实现细节

### 7.1 从对话中提取事件

**提示模板**：

```
你将获得一段咨询师和用户之间的对话：

======== 对话开始 ========
{conversation}
======== 对话结束 ========

请仔细阅读对话，并详细列出用户提到的所有事件/时刻/故事/经历，
以及这些事件发生的日期。你的输出应遵循以下格式：

1. <日期>#<主题>#<涉及人员>#<详细描述>
2. <日期>#<主题>#<涉及人员>#<详细描述>
...

这些事件应按时间顺序排列。
```

### 7.2 探索提示

**提示模板**：

```
你将获得一个包含用户生活中记忆节点列表，这些节点包括事件以及关于这些事件的细节。
你的任务是通过生成问题来重新激活用户的记忆。

以下是记忆节点：

======== 记忆节点开始 ========
{memory_node_info}
======== 记忆节点结束 ========

以下是一些构建问题的例子：

- 如果某个时期没有记录任何事件："我看关于你的青少年时期没有太多记录。那个时期发生了什么？"
- 如果某个人出现了多次："我注意到<名字>经常出现。为什么<名字>对你很重要？"
- 如果某人在重要事件中出现："<名字>似乎在这个事件中扮演了关键角色。关于<名字>的故事还有更多吗？"

你的输出应遵循以下格式：
1. 问题：<生成的问题>
2. 问题：<生成的问题>
```

---

## 8. 仿真环境

### 8.1 User Simulator 实现

使用 GPT-4-turbo 来模拟用户，评估系统在自传访谈中的表现。

基于流行的自传，实现三个大型语言模型用户代理：
- "A Promised Land" by Barack Obama
- "Jane Eyre: An Autobiography"
- "An Autobiography by Catherine Helen Spence"

### 8.2 用户系统提示

```
以下是您过去的生活经历摘要：

======== 摘要开始 ========
{personal_experience}
======== 摘要结束 ========

咨询师正试图通过询问您过去的经历来重新激活和重构您的记忆。

如果您不确定咨询师的问题，需要检索日记以获取相关文件和更多详细信息，
您必须输出 <RETRIEVE> 工具使用命令，格式如下：

<RETRIEVE> <您想要检索的问题>

例如：<RETRIEVE> <一次与朋友特别令人难忘或影响深刻的冒险或一天。>

如果提供了检索到的文件，您不应输出 <RETRIEVE> 命令。

确保对话自然且简短，就像真实的对话一样。不要提及您是 AI 助手。
您的输出应在 5 句话内。
```

### 8.3 用户指令提示

```
以下是与咨询师的问题/回应相关的文档和材料。

======== 文档开始 ========
{retrieved}
======== 文档结束 ========

您不应输出 <RETRIEVE> 命令。您必须根据提供的文档进行回答。
```

### 8.4 RAG 实现细节

- **框架**：Langchain
- **向量搜索**：FAISS (Douze et al., 2024)
- **相似性阈值**：0.67

---

## 9. 评估系统

### 9.1 访谈质量

#### 有效轮次计算

```
有效轮次百分比 = (#total rounds - #invalid rounds) / #total rounds
```

| 指标 | 说明 |
|:---|:---|
| **记忆计数 (#)** | 从所有面试会话中收集的记忆总数 |

### 9.2 对话质量

#### 正确性判断

**评估标准**：相关性 (0/1)

| 分数 | 说明 |
|:---:|:---|
| **0** | 不相关：提取的事件与用户的响应无关，或显著偏离主要主题 |
| **1** | 相关：提取的事件与用户的响应相关，并反映了关键主题或要点 |

#### 流畅度判断

评估两位面试官在对话中提供给用户的回应质量，选择在语法、拼写、标点、词汇选择和句子结构方面，回应质量更高的对话。

#### 识别判断

评估面试官的问题质量，包括：
- 详细的探究性问题
- 更笼统的问题以涵盖广泛的主题
- 问题清晰、简洁且易于理解
- 使用开放式问题引发详细且全面的回应

---

## 10. StorySage

### 10.1 系统概述

StorySage 支持灵活的对话和结构化的自传写作方法。

### 10.2 多智能体框架

| 角色 | 职责 |
|:---|:---|
| **面试官** (Interviewer) | 进行访谈，收集用户记忆 |
| **会议记录员** (Note Taker) | 记录和整理对话内容 |
| **规划者** (Planner) | 为未来的对话进行规划 |
| **章节撰写者** (Chapter Writer) | 撰写自传章节 |
| **会议协调员** (Session Coordinator) | 协调整体流程 |

### 10.3 设计原则

#### 允许人类主导对话并修改

> 一个有效的系统应该采用人机协同创作的方法，提供交互式工作流程，允许用户引导对话和塑造叙事，同时也要设计成实时适应对话流程和叙事结构。

#### 促进自然对话

> 一个有效的系统应该通过提出与用户兴趣相关的、有见地的提问来维持自然的对话流程。在指导性提示和更发人深省的后续问题之间需要取得平衡，以支持记忆回忆。

---

## 11. 参考文献

1. McAdams, D. P. (2008). **The Life Story Interview**
2. GuideLLM: LLM-guided Life Story Interview and Autobiography Generation
3. StorySage: Multi-agent Framework for Autobiography Writing
4. Second Me: Entity and Relation Extraction Technology
5. Douze et al. (2024). **FAISS**: Efficient Similarity Search

---

*最后更新：2026年2月*
